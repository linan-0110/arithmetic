<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			function statistics_one(n) {
				let count = 0
				for (let i = 1; i <= n; i++) {
					var str = '' + i
					for (s = 0; s < str.length; s++) {
						if (str.charAt(s) == '1') count++
					}
				}
				console.log(count)
				return count
			}
			console.time()
			statistics_one(4000000)
			console.timeEnd()





			//============================================
			// 性能比上一个差一倍
			function statistics_one2(n) {
				let count = 0
				for (let i = 1; i <= n; i++) {
					let arr = i.toString().match(/[1]/g)
					arr && (count += arr.length)
				}
				console.log(count)
				return count;
			}
			// console.time()
			// statistics_one2(4000000)
			// console.timeEnd()



			//跑过测试，复杂度为O(logn)版本
			//性能最佳
			var countDigitOne = function(n) {
				if (n < 1)
					return 0;
				let count = 0,
					base = 1,
					round = n;
				while (round > 0) {
					let weight = Math.floor(round % 10);
					round = Math.floor(round / 10);
					count += Math.floor(round * base);
					if (weight == 1)
						count += Math.floor(n % base) + 1;
					else if (weight > 1)
						count += base;
					base *= 10;
				}
				console.log(count)
				return count;
			};
			console.time()
			countDigitOne(4000000)
			console.timeEnd()
		</script>
	</body>
</html>
